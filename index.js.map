{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '50706028-1c89dce29f588a1d4e8ec62d3';\n\nexport const loadImages = async (search, page = 1) => {\n  const url = new URL('https://pixabay.com/api/');\n  url.searchParams.set('key', apiKey);\n  url.searchParams.set('q', search);\n  url.searchParams.set('page', page);\n  url.searchParams.set('per_page', 15);\n  url.searchParams.set('image_type', 'photo');\n  url.searchParams.set('orientation', 'horizontal');\n  url.searchParams.set('safesearch', true);\n\n  try {\n    const res = await axios.get(url);\n\n    return res.data;\n  } catch (err) {\n    console.error(err);\n    throw err;\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet gallery;\n\nexport const addLoader = () => {\n  // const loaderEl = document.createElement('span');\n  // loaderEl.classList.add('loader');\n  // document.querySelector('.loader-container').append(loaderEl);\n  const loader = document.querySelector('.loader');\n  loader.classList.remove('hidden');\n};\n\nexport const removeLoader = () => {\n  const loader = document.querySelector('.loader');\n  loader.classList.add('hidden');\n  // loader.remove();\n};\n\nconst getGalleryEl = () => document.querySelector('ul.gallery');\n\nconst createInfoCol = (label, value) => {\n  const colEl = document.createElement('div');\n  colEl.classList.add('info-col');\n  const labelEl = document.createElement('span');\n  labelEl.classList.add('info-label');\n  labelEl.textContent = label;\n  const valueEl = document.createElement('span');\n  valueEl.classList.add('info-value');\n  valueEl.textContent = value;\n  colEl.append(labelEl, valueEl);\n\n  return colEl;\n};\n\nconst createGalleryItemInfo = image => {\n  const galleryItemInfoEl = document.createElement('div');\n  galleryItemInfoEl.classList.add('gallery-item-info');\n  const likesEl = createInfoCol('Likes', image.likes);\n  const viewsEl = createInfoCol('Views', image.views);\n  const commentsEl = createInfoCol('Comments', image.comments);\n  const downloadsEl = createInfoCol('Downloads', image.downloads);\n\n  galleryItemInfoEl.append(likesEl, viewsEl, commentsEl, downloadsEl);\n\n  return galleryItemInfoEl;\n};\n\nexport const destroyGallery = () => {\n  if (gallery) {\n    gallery.destroy();\n\n    const galleryEl = getGalleryEl();\n    galleryEl.replaceChildren();\n  }\n};\n\nexport const renderGallery = images => {\n  const galleryEl = getGalleryEl();\n\n  const galleryElements = images.map(image => {\n    const galleryItemEl = document.createElement('li');\n    galleryItemEl.classList.add('gallery-item');\n\n    const galleryItemInfoEl = createGalleryItemInfo(image);\n\n    const galleryLinkEl = document.createElement('a');\n    galleryLinkEl.classList.add('gallery-link');\n    galleryLinkEl.setAttribute('href', image.webformatURL);\n\n    const imageEl = document.createElement('img');\n    imageEl.classList.add('gallery-image');\n    imageEl.setAttribute('alt', image.tags);\n    imageEl.setAttribute('src', image.largeImageURL);\n    // imageEl.setAttribute('data-source', image.largeImageURL);\n\n    galleryItemEl.append(galleryLinkEl);\n    galleryItemEl.append(galleryItemInfoEl);\n\n    galleryLinkEl.append(imageEl);\n\n    return galleryItemEl;\n  });\n\n  galleryEl.append(...galleryElements);\n\n  gallery = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n};\n","import iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { loadImages } from './js/pixabay-api';\nimport {\n  addLoader,\n  removeLoader,\n  renderGallery,\n  destroyGallery,\n} from './js/render-functions';\n\nlet search;\nlet searchPage;\nlet maxPage;\n\nconst searchForm = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  const form = event.target;\n  const searchValue = form.search.value;\n  if (!searchValue.trim()) return;\n\n  destroyGallery();\n  addLoader();\n\n  try {\n    const res = await loadImages(searchValue);\n    loadMoreBtn.classList.remove('hidden');\n    search = searchValue;\n    searchPage = 1;\n\n    const images = res.hits;\n    maxPage = Math.ceil(res.totalHits / 15);\n\n    if (!images.length)\n      return iziToast.error({\n        progressBar: false,\n        position: 'topRight',\n        animateInside: false,\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n\n    renderGallery(images);\n  } catch (err) {\n    loadMoreBtn.classList.add('hidden');\n    iziToast.error({\n      progressBar: false,\n      position: 'topRight',\n      animateInside: false,\n      message: err,\n    });\n  }\n  removeLoader();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  if (!search) return;\n\n  loadMoreBtn.classList.add('hidden');\n  addLoader();\n  try {\n    searchPage += 1;\n    const res = await loadImages(search, searchPage);\n    const images = res.hits;\n    renderGallery(images);\n    const galleryItemEl = document.querySelector('.gallery-item');\n\n    setTimeout(() => {\n      window.scrollBy({\n        behavior: 'smooth',\n        top: galleryItemEl.getBoundingClientRect().height * 2,\n      });\n    });\n\n    if (searchPage === maxPage) {\n      iziToast.info({\n        progressBar: false,\n        position: 'topRight',\n        animateInside: false,\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n    } else {\n      loadMoreBtn.classList.remove('hidden');\n    }\n  } catch (err) {\n    console.error(err);\n    iziToast.error({\n      progressBar: false,\n      position: 'topRight',\n      animateInside: false,\n      message: err,\n    });\n  }\n  removeLoader();\n});\n"],"names":["apiKey","loadImages","search","page","url","axios","err","gallery","addLoader","removeLoader","getGalleryEl","createInfoCol","label","value","colEl","labelEl","valueEl","createGalleryItemInfo","image","galleryItemInfoEl","likesEl","viewsEl","commentsEl","downloadsEl","destroyGallery","renderGallery","images","galleryEl","galleryElements","galleryItemEl","galleryLinkEl","imageEl","SimpleLightbox","searchPage","maxPage","searchForm","loadMoreBtn","event","searchValue","res","iziToast"],"mappings":"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"}