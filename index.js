import{a as v,S as w,i as m}from"./assets/vendor-Dy2ZTtfi.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=t(e);fetch(e.href,o)}})();const I="50706028-1c89dce29f588a1d4e8ec62d3",f=async(s,a=1)=>{const t=new URL("https://pixabay.com/api/");t.searchParams.set("key",I),t.searchParams.set("q",s),t.searchParams.set("page",a),t.searchParams.set("per_page",15),t.searchParams.set("image_type","photo"),t.searchParams.set("orientation","horizontal"),t.searchParams.set("safesearch",!0);try{return(await v.get(t)).data}catch(r){throw console.error(r),r}};let u;const y=()=>{document.querySelector(".loader").classList.remove("hidden")},g=()=>{document.querySelector(".loader").classList.add("hidden")},h=()=>document.querySelector("ul.gallery"),i=(s,a)=>{const t=document.createElement("div");t.classList.add("info-col");const r=document.createElement("span");r.classList.add("info-label"),r.textContent=s;const e=document.createElement("span");return e.classList.add("info-value"),e.textContent=a,t.append(r,e),t},b=s=>{const a=document.createElement("div");a.classList.add("gallery-item-info");const t=i("Likes",s.likes),r=i("Views",s.views),e=i("Comments",s.comments),o=i("Downloads",s.downloads);return a.append(t,r,e,o),a},P=()=>{u&&(u.destroy(),h().replaceChildren())},E=s=>{const a=h(),t=s.map(r=>{const e=document.createElement("li");e.classList.add("gallery-item");const o=b(r),l=document.createElement("a");l.classList.add("gallery-link"),l.setAttribute("href",r.webformatURL);const c=document.createElement("img");return c.classList.add("gallery-image"),c.setAttribute("alt",r.tags),c.setAttribute("src",r.largeImageURL),e.append(l),e.append(o),l.append(c),e});a.append(...t),u=new w(".gallery a",{captionsData:"alt",captionDelay:250})};let p,d,L;const S=document.querySelector(".form"),n=document.querySelector(".load-more");S.addEventListener("submit",async s=>{s.preventDefault();const t=s.target.search.value;if(t.trim()){P(),y();try{const r=await f(t);n.classList.remove("hidden"),p=t,d=1;const e=r.hits;if(L=Math.ceil(r.totalHits/15),!e.length)return m.error({progressBar:!1,position:"topRight",animateInside:!1,message:"Sorry, there are no images matching your search query. Please try again!"});E(e)}catch(r){n.classList.add("hidden"),m.error({progressBar:!1,position:"topRight",animateInside:!1,message:r})}g()}});n.addEventListener("click",async()=>{if(p){n.classList.add("hidden"),y();try{d+=1;const a=(await f(p,d)).hits;E(a);const t=document.querySelector(".gallery-item");setTimeout(()=>{window.scrollBy({behavior:"smooth",top:t.getBoundingClientRect().height*2})}),d===L?m.info({progressBar:!1,position:"topRight",animateInside:!1,message:"We're sorry, but you've reached the end of search results."}):n.classList.remove("hidden")}catch(s){console.error(s),m.error({progressBar:!1,position:"topRight",animateInside:!1,message:s})}g()}});
//# sourceMappingURL=index.js.map
